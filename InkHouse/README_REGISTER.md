# 用户注册功能说明

## 🎉 新增功能

### ✅ 已完成的注册功能

1. **用户注册界面**
   - 现代化的注册表单设计
   - 实时输入验证和错误提示
   - 响应式布局，支持滚动

2. **密码安全**
   - 使用 BCrypt 进行密码哈希加密
   - 自动升级现有明文密码
   - 密码强度验证（至少包含字母和数字）

3. **输入验证**
   - 用户名：3-20个字符，只允许字母、数字和下划线
   - 密码：至少6个字符，必须包含字母和数字
   - 邮箱：标准邮箱格式验证
   - 真实姓名：2-20个字符

4. **界面导航**
   - 登录页面添加"立即注册"链接
   - 注册页面添加"返回登录"链接
   - 注册成功后自动跳转到登录页面

## 🚀 使用方法

### 用户注册流程

1. **启动应用**
   ```bash
   dotnet run
   ```

2. **访问注册页面**
   - 在登录界面点击"立即注册"链接
   - 或直接打开注册窗口

3. **填写注册信息**
   - 用户名：输入唯一的用户名
   - 真实姓名：输入您的真实姓名
   - 邮箱地址：输入有效的邮箱地址
   - 密码：输入符合要求的密码
   - 确认密码：再次输入相同的密码

4. **提交注册**
   - 系统会自动验证所有输入
   - 注册成功后跳转到登录页面
   - 使用新账户登录系统

### 验证规则

#### 用户名验证
- 长度：3-20个字符
- 格式：只能包含字母、数字和下划线
- 唯一性：系统会检查用户名是否已存在

#### 密码验证
- 长度：至少6个字符，最多50个字符
- 强度：必须包含至少一个字母和一个数字
- 安全：使用BCrypt加密存储

#### 邮箱验证
- 格式：标准邮箱格式 (example@domain.com)
- 必填：注册时必须提供邮箱地址

#### 真实姓名验证
- 长度：2-20个字符
- 必填：用于用户身份识别

## 🔧 技术实现

### 新增文件

1. **ViewModels/RegisterViewModel.cs**
   - 注册表单的数据绑定和验证逻辑
   - 实时输入验证
   - 注册命令处理

2. **Views/RegisterView.axaml**
   - 注册表单UI设计
   - 错误提示显示
   - 响应式布局

3. **Views/RegisterWindow.axaml**
   - 注册窗口容器
   - 窗口事件处理

4. **Views/RegisterWindow.axaml.cs**
   - 注册窗口代码后端
   - 事件订阅和窗口管理

### 修改文件

1. **Services/UserService.cs**
   - 添加 `RegisterAsync` 方法
   - 添加 `IsUsernameAvailableAsync` 方法
   - 更新登录方法支持密码验证
   - 添加密码加密功能

2. **ViewModels/LoginViewModel.cs**
   - 添加注册导航事件
   - 添加注册导航命令

3. **Views/LoginView.axaml**
   - 添加"立即注册"链接

4. **Views/LoginWindow.axaml.cs**
   - 添加注册导航事件处理

5. **Services/ServiceManager.cs**
   - 注册 RegisterViewModel

6. **Styles/GlobalStyles.axaml**
   - 添加链接按钮样式

## 🛡️ 安全特性

1. **密码加密**
   - 使用 BCrypt 进行密码哈希
   - 自动升级现有明文密码
   - 防止密码泄露

2. **输入验证**
   - 前端实时验证
   - 后端二次验证
   - 防止恶意输入

3. **用户名唯一性**
   - 数据库级别的唯一性检查
   - 防止重复注册

## 🎨 UI/UX 特性

1. **现代化设计**
   - 与现有登录界面保持一致的设计风格
   - 清晰的视觉层次
   - 友好的错误提示

2. **响应式布局**
   - 支持不同屏幕尺寸
   - 滚动支持长表单

3. **实时反馈**
   - 输入时即时验证
   - 清晰的错误和成功提示
   - 加载状态指示

## 🔄 后续扩展建议

1. **邮箱验证**
   - 发送验证邮件
   - 邮箱激活流程

2. **密码重置**
   - 忘记密码功能
   - 邮箱重置链接

3. **用户资料**
   - 扩展用户信息字段
   - 头像上传功能

4. **社交登录**
   - 第三方登录集成
   - OAuth 支持

## 📝 注意事项

1. **数据库**
   - 确保数据库连接正常
   - 用户表结构支持新字段

2. **依赖包**
   - 已添加 BCrypt.Net-Next 包
   - 确保包版本兼容

3. **测试**
   - 建议进行完整的注册流程测试
   - 验证密码加密功能
   - 测试各种边界情况
